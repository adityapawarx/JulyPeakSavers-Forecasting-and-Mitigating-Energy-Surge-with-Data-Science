---
title: "Energy_new"
output: html_document
date: "2023-12-02"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:
Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
```{r}
library(tidyverse)
energy_merged_path <- read_csv("")
```

```{r}
weather_combined <- read_csv("C:/Users/Soundarya Ravi/Desktop/Shiny/weather_tf_july_276.csv")
```


```{r}
#raw_energy_merged <- read_csv("C:/Users/Soundarya Ravi/Downloads/rawenergymerge.csv")
raw_energy_merged <- na.omit(raw_energy_merged)
nrow(raw_energy_merged)

```

```{r}



```


```{r}
raw_energy_merged$out.electricity.pv.energy_consumption[raw_energy_merged$out.electricity.pv.energy_consumption < 0] <- 0

```

```{r}
summary(raw_energy_merged)
```



```{r}
library(tidyverse)
#path <- "C:/Users/Soundarya Ravi/Desktop/Shiny/Raw Files/rawenergyfinal.csv"
data <- raw_energy_merged

#view(data111)
head(data,100)
colnames(data)

# Kitchen
# out.electricity.range_oven.energy_consumption
# out.electricity.dishwasher.energy_consumption
# out.electricity.refrigerator.energy_consumption
# out.electricity.freezer.energy_consumption
# out.natural_gas.range_oven.energy_consumption
# out.natural_gas.grill.energy_consumption
# out.propane.range_oven.energy_consumption
# 
# laundry
# out.electricity.clothes_dryer.energy_consumption
# out.natural_gas.clothes_dryer.energy_consumption
# out.electricity.clothes_washer.energy_consumption
# out.propane.clothes_dryer.energy_consumption
# 
# heating_cooling
# out.electricity.heating_fans_pumps.energy_consumption
# out.electricity.heating_hp_bkup.energy_consumption
# out.electricity.heating.energy_consumption
# out.electricity.cooling.energy_consumption
# out.natural_gas.heating_hp_bkup.energy_consumption
# out.natural_gas.heating.energy_consumption
# out.propane.heating_hp_bkup.energy_consumption
# out.propane.heating.energy_consumption
# out.fuel_oil.heating_hp_bkup.energy_consumption
# out.fuel_oil.heating.energy_consumption
# out.natural_gas.fireplace.energy_consumption
# out.electricity.cooling_fans_pumps.energy_consumption
# 
# water_heating
# out.electricity.hot_water.energy_consumption
# out.fuel_oil.hot_water.energy_consumption
# out.natural_gas.hot_water.energy_consumption
# out.propane.hot_water.energy_consumption
# 
# electrical_appliances
# out.electricity.lighting_exterior.energy_consumption
# out.electricity.lighting_garage.energy_consumption
# out.electricity.lighting_interior.energy_consumption
# out.electricity.plug_loads.energy_consumption
# out.electricity.mech_vent.energy_consumption
# out.natural_gas.lighting.energy_consumption
# out.electricity.ceiling_fan.energy_consumption
# 
# outdoor_appliances
# out.electricity.hot_tub_heater.energy_consumption
# out.electricity.hot_tub_pump.energy_consumption
# out.electricity.pool_heater.energy_consumption
# out.electricity.pool_pump.energy_consumption
# out.natural_gas.hot_tub_heater.energy_consumption
# out.natural_gas.pool_heater.energy_consumption
# out.electricity.well_pump.energy_consumption
# 
# renewable_energy
# out.electricity.pv.energy_consumption

# kitchen
data$out.kitchen.energy_consumption <- data$out.electricity.range_oven.energy_consumption +
  data$out.electricity.dishwasher.energy_consumption +
  data$out.electricity.refrigerator.energy_consumption +
  data$out.electricity.freezer.energy_consumption +
  data$out.natural_gas.range_oven.energy_consumption +
  data$out.natural_gas.grill.energy_consumption +
  data$out.propane.range_oven.energy_consumption

# laundry
data$out.laundry.energy_consumption <- data$out.electricity.clothes_dryer.energy_consumption +
  data$out.natural_gas.clothes_dryer.energy_consumption +
  data$out.electricity.clothes_washer.energy_consumption +
  data$out.propane.clothes_dryer.energy_consumption

# heating_cooling
data$out.heating_cooling.energy_consumption <- data$out.electricity.heating_fans_pumps.energy_consumption +
  data$out.electricity.heating_hp_bkup.energy_consumption +
  data$out.electricity.heating.energy_consumption +
  data$out.electricity.cooling.energy_consumption +
  data$out.natural_gas.heating_hp_bkup.energy_consumption +
  data$out.natural_gas.heating.energy_consumption +
  data$out.propane.heating_hp_bkup.energy_consumption +
  data$out.propane.heating.energy_consumption +
  data$out.fuel_oil.heating_hp_bkup.energy_consumption +
  data$out.fuel_oil.heating.energy_consumption +
  data$out.natural_gas.fireplace.energy_consumption +
  data$out.electricity.cooling_fans_pumps.energy_consumption

# water_heating
data$out.water_heating.energy_consumption <- data$out.electricity.hot_water.energy_consumption +
  data$out.fuel_oil.hot_water.energy_consumption +
  data$out.natural_gas.hot_water.energy_consumption +
  data$out.propane.hot_water.energy_consumption

# electrical_appliances
data$out.electrical_appliances.energy_consumption <- data$out.electricity.lighting_exterior.energy_consumption +
  data$out.electricity.lighting_garage.energy_consumption +
  data$out.electricity.lighting_interior.energy_consumption +
  data$out.electricity.plug_loads.energy_consumption +
  data$out.electricity.mech_vent.energy_consumption +
  data$out.natural_gas.lighting.energy_consumption +
  data$out.electricity.ceiling_fan.energy_consumption

# outdoor_appliances
data$out.outdoor_appliances.energy_consumption <- data$out.electricity.hot_tub_heater.energy_consumption +
  data$out.electricity.hot_tub_pump.energy_consumption +
  data$out.electricity.pool_heater.energy_consumption +
  data$out.electricity.pool_pump.energy_consumption +
  data$out.natural_gas.hot_tub_heater.energy_consumption +
  data$out.natural_gas.pool_heater.energy_consumption +
  data$out.electricity.well_pump.energy_consumption

# renewable_energy
data$out.renewable_energy.energy_consumption <- data$out.electricity.pv.energy_consumption

#total
data$out.total.energy_consumption <- data$out.electricity.range_oven.energy_consumption +
  data$out.electricity.dishwasher.energy_consumption +
  data$out.electricity.refrigerator.energy_consumption +
  data$out.electricity.freezer.energy_consumption +
  data$out.natural_gas.range_oven.energy_consumption +
  data$out.natural_gas.grill.energy_consumption +
  data$out.propane.range_oven.energy_consumption +
  data$out.electricity.clothes_dryer.energy_consumption +
  data$out.natural_gas.clothes_dryer.energy_consumption +
  data$out.electricity.clothes_washer.energy_consumption +
  data$out.propane.clothes_dryer.energy_consumption +
  data$out.electricity.heating_fans_pumps.energy_consumption +
  data$out.electricity.heating_hp_bkup.energy_consumption +
  data$out.electricity.heating.energy_consumption +
  data$out.electricity.cooling.energy_consumption +
  data$out.natural_gas.heating_hp_bkup.energy_consumption +
  data$out.natural_gas.heating.energy_consumption +
  data$out.propane.heating_hp_bkup.energy_consumption +
  data$out.propane.heating.energy_consumption +
  data$out.fuel_oil.heating_hp_bkup.energy_consumption +
  data$out.fuel_oil.heating.energy_consumption +
  data$out.natural_gas.fireplace.energy_consumption +
  data$out.electricity.cooling_fans_pumps.energy_consumption +
  data$out.electricity.hot_water.energy_consumption +
  data$out.fuel_oil.hot_water.energy_consumption +
  data$out.natural_gas.hot_water.energy_consumption +
  data$out.propane.hot_water.energy_consumption +
  data$out.electricity.lighting_exterior.energy_consumption +
  data$out.electricity.lighting_garage.energy_consumption +
  data$out.electricity.lighting_interior.energy_consumption +
  data$out.electricity.plug_loads.energy_consumption +
  data$out.electricity.mech_vent.energy_consumption +
  data$out.natural_gas.lighting.energy_consumption +
  data$out.electricity.ceiling_fan.energy_consumption +
  data$out.electricity.hot_tub_heater.energy_consumption +
  data$out.electricity.hot_tub_pump.energy_consumption +
  data$out.electricity.pool_heater.energy_consumption +
  data$out.electricity.pool_pump.energy_consumption +
  data$out.natural_gas.hot_tub_heater.energy_consumption +
  data$out.natural_gas.pool_heater.energy_consumption +
  data$out.electricity.well_pump.energy_consumption +
  data$out.electricity.pv.energy_consumption

colnames(data[,1:45])
colnames(data[,45:53])
data_dependent <- data[,44:53]


setwd("C:/Users/Soundarya Ravi/Desktop/Shiny/")

write.csv(data_dependent, file ="energy_merged_column.csv",row.names = FALSE)




```

```{r}
head(data)
```



```{r}

#nrow(data_dependent)
head(data_dependent)
str(data_dependent)

```

```{r}
library(dplyr)
library(tibble)

process_energy_data <- function(energy_data) {
  result_df <- energy_data %>%
    mutate(hour = hour(time),
           time_split = case_when(
             hour %in% c(0, 1, 2, 3) ~ "Late Night",
             hour %in% c(4, 5, 6, 7, 8) ~ "Early Morning",
             hour %in% c(9, 10, 11, 12) ~ "Morning",
             hour %in% c(13, 14, 15) ~ "Noon",
             hour %in% c(16, 17, 18) ~ "Evening",
             hour %in% c(19, 20, 21, 22, 23) ~ "Night",
             TRUE ~ "Other"
           )) %>%
    group_by(bldg_id, time_split) %>%
    summarise(
      out.kitchen_energy_consumption = mean(out.kitchen.energy_consumption),
      out.laundry_energy_consumption = mean(out.laundry.energy_consumption),
      out.heating_cooling_energy_consumption = mean(out.heating_cooling.energy_consumption),
      out.water_heating_energy_consumption = mean(out.water_heating.energy_consumption),
      out.electrical_appliances_energy_consumption = mean(out.electrical_appliances.energy_consumption),
      out.outdoor_appliances_energy_consumption = mean(out.outdoor_appliances.energy_consumption),
      out.renewable_energy_energy_consumption = mean(out.renewable_energy.energy_consumption),
      out.total_energy_consumption = mean(out.total.energy_consumption)
    ) %>%
    ungroup() %>%
    mutate(
      time_range = case_when(
        time_split == "Late Night" ~ "00:00:00 to 03:00:00",
        time_split == "Early Morning" ~ "04:00:00 to 08:00:00",
        time_split == "Morning" ~ "09:00:00 to 12:00:00",
        time_split == "Noon" ~ "13:00:00 to 15:00:00",
        time_split == "Evening" ~ "16:00:00 to 18:00:00",
        time_split == "Night" ~ "19:00:00 to 23:00:00",
        TRUE ~ "Other"
      )
    ) %>%
    arrange(bldg_id, time_range)
  
  return(result_df)
}

# Example usage:
# Assuming your energy dataframe is named energy_data
energy_result_df <- process_energy_data(data_dependent)

# Print the result
print(energy_result_df)




```

```{r}
setwd("C:/Users/Soundarya Ravi/Desktop/Shiny/")

write.csv(energy_result_df, file ="energy_aggregated_final.csv",row.names = FALSE)
```

```{r}
library(arrow)
house_data_path <-  "https://intro-datascience.s3.us-east-2.amazonaws.com/SC-data/static_house_info.parquet"
static_house_data <-  read_parquet(house_data_path)

Static_Columns_Filtered <-  c('bldg_id','in.county', 'in.county_and_puma','in.sqft', 'in.bedrooms','in.building_america_climate_zone', 'in.ceiling_fan', 'in.city', 'in.clothes_dryer', 'in.clothes_washer', 'in.cooking_range', 'in.cooling_setpoint', 'in.cooling_setpoint_offset_magnitude','in.dishwasher','in.federal_poverty_level', 'in.geometry_attic_type', 'in.geometry_floor_area', 'in.geometry_floor_area_bin', 'in.geometry_garage','in.heating_fuel', 'in.heating_setpoint','in.heating_setpoint_offset_magnitude', 'in.hot_water_fixtures', 'in.hvac_cooling_efficiency', 'in.hvac_cooling_partial_space_conditioning','in.hvac_cooling_type', 'in.hvac_has_ducts', 'in.hvac_has_zonal_electric_heating', 'in.hvac_heating_efficiency', 'in.hvac_heating_type', 'in.hvac_heating_type_and_fuel','in.income','in.income_recs_2015', 'in.income_recs_2020', 'in.infiltration', 'in.insulation_ceiling', 'in.insulation_floor', 'in.insulation_foundation_wall', 'in.insulation_rim_joist', 'in.insulation_roof', 'in.insulation_slab', 'in.insulation_wall', 'in.lighting', 'in.misc_extra_refrigerator', 'in.misc_freezer', 'in.misc_gas_fireplace','in.misc_gas_grill', 'in.misc_gas_lighting', 'in.misc_hot_tub_spa', 'in.misc_pool', 'in.misc_pool_heater', 'in.misc_pool_pump', 'in.misc_well_pump', 'in.natural_ventilation','in.occupants', 'in.orientation', 'in.plug_load_diversity', 'in.refrigerator', 'in.roof_material', 'in.tenure','in.usage_level', 'in.vacancy_status', 'in.vintage', 'in.vintage_acs','in.water_heater_efficiency', 'in.water_heater_fuel', 'in.weather_file_city','in.weather_file_latitude','in.weather_file_longitude', 'in.window_areas','in.windows', 'upgrade.insulation_roof', 'upgrade.water_heater_efficiency', 'upgrade.hvac_cooling_efficiency', 'upgrade.infiltration_reduction', 'upgrade.geometry_foundation_type','upgrade.clothes_dryer', 'upgrade.insulation_ceiling', 'upgrade.hvac_heating_type', 'upgrade.insulation_wall', 'upgrade.insulation_foundation_wall',
'upgrade.hvac_heating_efficiency', 'upgrade.cooking_range')
static_house_filtered <- static_house_data %>% select(all_of(Static_Columns_Filtered))
```


```{r}
setwd("C:/Users/Soundarya Ravi/Desktop/Shiny/")

write.csv(static_house_filtered, file ="statichousefirstcopy.csv",row.names = FALSE)


```

```{r}
unique_values <- sapply(static_house_filtered, unique)
print(unique_values)

copy_SHF <- static_house_filtered 

```


```{r}
str(copy_SHF)
static_house_filtered <- copy_SHF
```




```{r}
# Coding it ordinally for the model to understand
# Ordinal coding for in.sqft
in_sqft_mapping <- c("885"=3, "1220"=4, "1690"=5, "2176"=6, "2663"=7, "3301"=8, "8194"=9, "328"=1, "633"=2)
static_house_filtered$in.sqft <- as.numeric(in_sqft_mapping[as.character(static_house_filtered$in.sqft)])


# Ordinal coding for in.bedrooms
in_bedrooms_mapping <- c("3"=3, "2"=2, "4"=4, "1"=1, "5"=5)
static_house_filtered$in.bedrooms <- as.numeric(in_bedrooms_mapping[as.character(static_house_filtered$in.bedrooms)])

# Ordinal coding for in.building_america_climate_zone
in_building_america_climate_zone_mapping <- c("Mixed-Humid"=1, "Hot-Humid"=2)
static_house_filtered$in.building_america_climate_zone <- as.numeric(in_building_america_climate_zone_mapping[static_house_filtered$in.building_america_climate_zone])

# Ordinal coding for in.ceiling_fan
in_ceiling_fan_mapping <- c("Standard Efficiency"=2, "None"=0, "Standard Efficiency, No usage"=1)
static_house_filtered$in.ceiling_fan <- as.numeric(in_ceiling_fan_mapping[static_house_filtered$in.ceiling_fan])

# # Ordinal coding for in.city (assuming the given order)
# in_city_mapping <- c(
#   "SC, Rock Hill"=1, "Not in a census Place"=2, "In another census Place"=3, "SC, Goose Creek"=4,
#   "SC, Mount Pleasant"=5, "SC, Sumter"=6, "SC, Charleston"=7, "SC, Hilton Head Island"=8,
# #   "SC, North Charleston"=9, "SC, Greenville"=10, "SC, Myrtle Beach"=11, "SC, Columbia"=12,
# #   "SC, Florence"=13, "SC, North Myrtle Beach"=14, "SC, Spartanburg"=15, "SC, Summerville"=16
# # )
# static_house_filtered$in.city <- as.numeric(in_city_mapping[static_house_filtered$in.city])

# Ordinal coding for in.clothes_dryer
in_clothes_dryer_mapping <- c(
  "Gas, 100% Usage"= 5, "Electric, 100% Usage"=2, "Electric, 80% Usage"=1,
  "Electric, 120% Usage"=3, "None"=0, "Propane, 100% Usage"=8,
  "Gas, 120% Usage"=6, "Propane, 80% Usage"=7, "Gas, 80% Usage"=4,
  "Propane, 120% Usage"=9
)
static_house_filtered$in.clothes_dryer <- as.numeric(in_clothes_dryer_mapping[static_house_filtered$in.clothes_dryer])

# Ordinal coding for in.clothes_washer
in_clothes_washer_mapping <- c(
  "Standard, 100% Usage"=5, "EnergyStar, 100% Usage"=2, "Standard, 80% Usage"=4,
  "EnergyStar, 80% Usage"=1, "Standard, 120% Usage"=6, "EnergyStar, 120% Usage"=3,
  "None"=0
)
static_house_filtered$in.clothes_washer <- as.numeric(in_clothes_washer_mapping[static_house_filtered$in.clothes_washer])

# Ordinal coding for in.cooking_range
in_cooking_range_mapping <- c(
  "Electric, 100% Usage"=2, "Gas, 80% Usage"=4, "Electric, 80% Usage"=1,
  "Gas, 120% Usage"=6, "Electric, 120% Usage"=3, "Gas, 100% Usage"=5,
  "Propane, 80% Usage"=7, "Propane, 100% Usage"=8, "Propane, 120% Usage"=9,
  "None"=0
)
static_house_filtered$in.cooking_range <- as.numeric(in_cooking_range_mapping[static_house_filtered$in.cooking_range])

# Ordinal coding for in.cooling_setpoint (assuming the given order)
in_cooling_setpoint_mapping <- c(
  "72F"=7, "76F"=9, "70F"=6, "60F"=1, "78F"=10, "75F"=8, "68F"=5, "62F"=2, "65F"=3,
  "80F"=11, "67F"=4
)
static_house_filtered$in.cooling_setpoint <- as.numeric(in_cooling_setpoint_mapping[static_house_filtered$in.cooling_setpoint])

# Ordinal coding for in.cooling_setpoint_offset_magnitude (assuming the given order)
in_cooling_setpoint_offset_magnitude_mapping <- c("0F"=0, "2F"=1, "5F"=2, "9F"=3)
static_house_filtered$in.cooling_setpoint_offset_magnitude <- as.numeric(in_cooling_setpoint_offset_magnitude_mapping[static_house_filtered$in.cooling_setpoint_offset_magnitude])

# Ordinal coding for in.dishwasher
in_dishwasher_mapping <- c(
  "None"=0, "290 Rated kWh, 100% Usage"=1, "318 Rated kWh, 80% Usage"=2,
  "318 Rated kWh, 120% Usage"=3, "290 Rated kWh, 80% Usage"=4,
  "290 Rated kWh, 120% Usage"=5, "318 Rated kWh, 100% Usage"=6
)
static_house_filtered$in.dishwasher <- as.numeric(in_dishwasher_mapping[static_house_filtered$in.dishwasher])

# Ordinal coding for in.federal_poverty_level
in_federal_poverty_level_mapping <- c(
  "0-100%"=1, "150-200%"=2, "100-150%"=3, "400%+"=6, "200-300%"=4, "300-400%"=5
)
static_house_filtered$in.federal_poverty_level <- as.numeric(in_federal_poverty_level_mapping[static_house_filtered$in.federal_poverty_level])

# Ordinal coding for in.geometry_attic_type
in_geometry_attic_type_mapping <- c("Vented Attic"=1, "Finished Attic or Cathedral Ceilings"=2)
static_house_filtered$in.geometry_attic_type <- as.numeric(in_geometry_attic_type_mapping[static_house_filtered$in.geometry_attic_type])

# Ordinal coding for in.geometry_floor_area
in_geometry_floor_area_mapping <- c(
  "0-499"=0 ,"500-749"=1,"750-999"=2,"1000-1499"=3,"1500-1999"=4,"2000-2499"=5,"2500-2999"=6,"3000-3999"=7,"4000+"=8
)
static_house_filtered$in.geometry_floor_area <- as.numeric(in_geometry_floor_area_mapping[static_house_filtered$in.geometry_floor_area])

# Ordinal coding for in.geometry_floor_area_bin
in_geometry_floor_area_bin_mapping <- c("0-1499"=1, "1500-2499"=2, "2500-3999"=3, "4000+"=4)
static_house_filtered$in.geometry_floor_area_bin <- as.numeric(in_geometry_floor_area_bin_mapping[static_house_filtered$in.geometry_floor_area_bin])

# Ordinal coding for in.geometry_garage
in_geometry_garage_mapping <- c("1 Car"=1, "None"=0, "2 Car"=2, "3 Car"=3)
static_house_filtered$in.geometry_garage <- as.numeric(in_geometry_garage_mapping[static_house_filtered$in.geometry_garage])

# Ordinal coding for in.heating_fuel
in_heating_fuel_mapping <- c(
  "Natural Gas"=1, "Electricity"=2, "Propane"=3, "Other Fuel"=4,
  "Fuel Oil"=5, "None"=0
)
static_house_filtered$in.heating_fuel <- as.numeric(in_heating_fuel_mapping[static_house_filtered$in.heating_fuel])

# Ordinal coding for in.heating_setpoint
in_heating_setpoint_mapping <- c(
  "70F"=6, "65F"=3, "68F"=5, "72F"=7, "75F"=8, "76F"=9,
  "78F"=10, "67F"=4, "55F"=0, "60F"=1, "80F"=11, "62F"=2
)
static_house_filtered$in.heating_setpoint <- as.numeric(in_heating_setpoint_mapping[static_house_filtered$in.heating_setpoint])

# Ordinal coding for in.heating_setpoint_offset_magnitude
in_heating_setpoint_offset_magnitude_mapping <- c("0F"=0, "3F"=1, "12F"=3, "6F"=2)
static_house_filtered$in.heating_setpoint_offset_magnitude <- as.numeric(in_heating_setpoint_offset_magnitude_mapping[static_house_filtered$in.heating_setpoint_offset_magnitude])

# Ordinal coding for in.hot_water_fixtures
in_hot_water_fixtures_mapping <- c("100% Usage"=2, "50% Usage"=1, "200% Usage"=3)
static_house_filtered$in.hot_water_fixtures <- as.numeric(in_hot_water_fixtures_mapping[static_house_filtered$in.hot_water_fixtures])

# Ordinal coding for in.hvac_cooling_efficiency
in_hvac_cooling_efficiency_mapping <- c(
  "AC, SEER 15"=1, "AC, SEER 13"=2, "None"=0, "AC, SEER 10"=4,
  "Heat Pump"=5, "Room AC, EER 10.7"=6, "Room AC, EER 8.5"=7,
  "AC, SEER 8"=8, "Room AC, EER 9.8"=9, "Room AC, EER 12.0"=10
)
static_house_filtered$in.hvac_cooling_efficiency <- as.numeric(in_hvac_cooling_efficiency_mapping[static_house_filtered$in.hvac_cooling_efficiency])

# Ordinal coding for in.hvac_cooling_partial_space_conditioning
in_hvac_cooling_partial_space_conditioning_mapping <- c(
  "100% Conditioned"=5, "None"=0, "80% Conditioned"=4,
  "60% Conditioned"=3, "20% Conditioned"=1, "40% Conditioned"=2
)
static_house_filtered$in.hvac_cooling_partial_space_conditioning <- as.numeric(in_hvac_cooling_partial_space_conditioning_mapping[static_house_filtered$in.hvac_cooling_partial_space_conditioning])

# Ordinal coding for in.hvac_cooling_type
in_hvac_cooling_type_mapping <- c("Central AC"=1, "None"=0, "Heat Pump"=2, "Room AC"=3)
static_house_filtered$in.hvac_cooling_type <- as.numeric(in_hvac_cooling_type_mapping[static_house_filtered$in.hvac_cooling_type])

# Ordinal coding for in.hvac_has_ducts
in_hvac_has_ducts_mapping <- c("Yes"=1, "No"=0)
static_house_filtered$in.hvac_has_ducts <- as.numeric(in_hvac_has_ducts_mapping[static_house_filtered$in.hvac_has_ducts])

# Ordinal coding for in.hvac_has_zonal_electric_heating
in_hvac_has_zonal_electric_heating_mapping <- c("No"=0, "Yes"=1)
static_house_filtered$in.hvac_has_zonal_electric_heating <- as.numeric(in_hvac_has_zonal_electric_heating_mapping[static_house_filtered$in.hvac_has_zonal_electric_heating])

# Ordinal coding for in.hvac_heating_efficiency
# Ordinal coding for in_hvac_heating_efficiency



# Ordinal coding for in.hvac_heating_type
in_hvac_heating_type_mapping <- c("Ducted Heating"=1, "Non-Ducted Heating"=2, "Ducted Heat Pump"=3, "None"=0)
static_house_filtered$in.hvac_heating_type <- as.numeric(in_hvac_heating_type_mapping[static_house_filtered$in.hvac_heating_type])
# Ordinal coding for in.hvac_heating_type_and_fuel
in_hvac_heating_type_and_fuel_mapping <- c(
  "Natural Gas Fuel Furnace"=1, "Natural Gas Fuel Boiler"=2, "Electricity Electric Furnace"=3,
  "Electricity ASHP"=4, "Electricity Baseboard"=5, "Propane Fuel Furnace"=6,
  "None"=7, "Propane Fuel Boiler"=8, "Natural Gas Fuel Wall/Floor Furnace"=9,
  "Fuel Oil Fuel Furnace"=10, "Propane Fuel Wall/Floor Furnace"=11, "Electricity Electric Boiler"=12,
  "Fuel Oil Fuel Boiler"=13, "Electricity Electric Wall Furnace"=14, "Fuel Oil Fuel Wall/Floor Furnace"=15
)

static_house_filtered$in.hvac_heating_type_and_fuel <- as.numeric(in_hvac_heating_type_and_fuel_mapping[as.character(static_house_filtered$in.hvac_heating_type_and_fuel)])


# Ordinal coding for in.income
# Updated Ordinal coding for in.income using maximum value of the range
income_mapping <- c(
  "<10000"=9999, "10000-14999"=14999, "15000-19999"=19999, "20000-24999"=24999,
  "25000-29999"=29999, "30000-34999"=34999, "35000-39999"=39999, "40000-44999"=44999,
  "45000-49999"=49999, "50000-59999"=59999, "60000-69999"=69999, "70000-79999"=79999,
  "80000-99999"=99999, "100000-119999"=119999, "120000-139999"=139999,
  "140000-159999"=159999, "160000-179999"=179999, "180000-199999"=199999, "200000+"=200000
)

static_house_filtered$in.income <- as.numeric(income_mapping[static_house_filtered$in.income])

# Ordinal coding for in.insulation_ceiling
in_insulation_ceiling_mapping <- c(
  "R-30"=4, "R-13"=2, "R-38"=5, "R-19"=3, "R-7"=1, "Uninsulated"=7, "None"=0, "R-49"=6
)
static_house_filtered$in.insulation_ceiling <- as.numeric(in_insulation_ceiling_mapping[static_house_filtered$in.insulation_ceiling])

# Ordinal coding for in.insulation_floor
in_insulation_floor_mapping <- c("None"=0, "Uninsulated"=1, "Ceiling R-13"=2, "Ceiling R-19"=3)
static_house_filtered$in.insulation_floor <- as.numeric(in_insulation_floor_mapping[static_house_filtered$in.insulation_floor])

# Ordinal coding for in.insulation_foundation_wall
in_insulation_foundation_wall_mapping <- c(
  "None"=0, "Uninsulated"=1, "Wall R-10, Exterior"=3, "Wall R-15, Exterior"=4, "Wall R-5, Exterior"=2
)
static_house_filtered$in.insulation_foundation_wall <- as.numeric(in_insulation_foundation_wall_mapping[static_house_filtered$in.insulation_foundation_wall])

# Ordinal coding for in.insulation_rim_joist
in_insulation_rim_joist_mapping <- c("None"=0, "Uninsulated"=1, "R-10, Exterior"=3, "R-15, Exterior"=4, "R-5, Exterior"=2)
static_house_filtered$in.insulation_rim_joist <- as.numeric(in_insulation_rim_joist_mapping[static_house_filtered$in.insulation_rim_joist])

# Ordinal coding for in.insulation_roof
in_insulation_roof_mapping <- c(
  "Unfinished, Uninsulated"=1, "Finished, R-30"=2, "Finished, R-38"=3,
  "Finished, R-19"=4, "Finished, R-13"=5, "Finished, R-49"=6, "Finished, R-7"=7, "Finished, Uninsulated"=8
)
static_house_filtered$in.insulation_roof <- as.numeric(in_insulation_roof_mapping[static_house_filtered$in.insulation_roof])

# Ordinal coding for in.insulation_slab
in_insulation_slab_mapping <- c(
  "Uninsulated"=1, "None"=2, "2ft R10 Under, Horizontal"=3,
  "2ft R5 Under, Horizontal"=4, "2ft R5 Perimeter, Vertical"=5, "2ft R10 Perimeter, Vertical"=6
)
static_house_filtered$in.insulation_slab <- as.numeric(in_insulation_slab_mapping[static_house_filtered$in.insulation_slab])

# # Ordinal coding for in.insulation_wall
# in_insulation_wall_mapping <- c(
#   "Wood Stud, Uninsulated"=1, "Wood Stud, R-11"=2, "Brick, 12-in, 3-wythe, R-11"=3,
#   "CMU, 6-in Hollow, R-7"=4, "Wood Stud, R-15"=5, "Wood Stud, R-7"=6,
#   "CMU, 6-in Hollow, R-11"=7, "CMU, 6-in Hollow, Uninsulated"=8,
#   "Brick, 12-in, 3-wythe, Uninsulated"=9, "Brick, 12-in, 3-wythe, R-7"=10,
#   "Wood Stud, R-19"=11, "Brick, 12-in, 3-wythe, R-15"=12, "CMU, 6-in Hollow, R-15"=13,
#   "Brick, 12-in, 3-wythe, R-19"=14, "CMU, 6-in Hollow, R-19"=15
# )
# static_house_filtered$in.insulation_wall <- as.numeric(in_insulation_wall_mapping[static_house_filtered$in.insulation_wall])

# Ordinal coding for in.lighting
in_lighting_mapping <- c("100% Incandescent"=1, "100% LED"=2, "100% CFL"=3)
static_house_filtered$in.lighting <- as.numeric(in_lighting_mapping[static_house_filtered$in.lighting])

# Ordinal coding for in.misc_extra_refrigerator
in_misc_extra_refrigerator_mapping <- c("EF 17.6"=5, "None"=0, "EF 15.9"=4, "EF 19.9"=6, "EF 6.7"=1, "EF 10.5"=2, "EF 10.2"=3)
static_house_filtered$in.misc_extra_refrigerator <- as.numeric(in_misc_extra_refrigerator_mapping[static_house_filtered$in.misc_extra_refrigerator])

# Ordinal coding for in.misc_freezer
in_misc_freezer_mapping <- c("EF 12, National Average"=1, "None"=0)
static_house_filtered$in.misc_freezer <- as.numeric(in_misc_freezer_mapping[static_house_filtered$in.misc_freezer])

# Ordinal coding for in.misc_gas_fireplace
in_misc_gas_fireplace_mapping <- c("None"=0, "Gas Fireplace"=2)
static_house_filtered$in.misc_gas_fireplace <- as.numeric(in_misc_gas_fireplace_mapping[static_house_filtered$in.misc_gas_fireplace])

# Ordinal coding for in.misc_gas_grill
in_misc_gas_grill_mapping <- c("None"=0, "Gas Grill"=2)
static_house_filtered$in.misc_gas_grill <- as.numeric(in_misc_gas_grill_mapping[static_house_filtered$in.misc_gas_grill])

# Ordinal coding for in.misc_gas_lighting
in_misc_gas_lighting_mapping <- c("None"=0, "Gas Lighting"=2)
static_house_filtered$in.misc_gas_lighting <- as.numeric(in_misc_gas_lighting_mapping[static_house_filtered$in.misc_gas_lighting])

# Ordinal coding for in.misc_hot_tub_spa
in_misc_hot_tub_spa_mapping <- c("None"=0, "Gas"=2, "Electric"=1)
static_house_filtered$in.misc_hot_tub_spa <- as.numeric(in_misc_hot_tub_spa_mapping[static_house_filtered$in.misc_hot_tub_spa])

# Ordinal coding for in.misc_pool
in_misc_pool_mapping <- c("None"=0, "Has Pool"=1)
static_house_filtered$in.misc_pool <- as.numeric(in_misc_pool_mapping[static_house_filtered$in.misc_pool])

# Ordinal coding for in.misc_pool_heater
in_misc_pool_heater_mapping <- c("None"=0, "Electric"=1, "Solar"=3, "Gas"=2)
static_house_filtered$in.misc_pool_heater <- as.numeric(in_misc_pool_heater_mapping[static_house_filtered$in.misc_pool_heater])

# Ordinal coding for in.misc_pool_pump
in_misc_pool_pump_mapping <- c("None"=0, "1.0 HP Pump"=1)
static_house_filtered$in.misc_pool_pump <- as.numeric(in_misc_pool_pump_mapping[static_house_filtered$in.misc_pool_pump])

# Ordinal coding for in.misc_well_pump
in_misc_well_pump_mapping <- c("None"=0, "Typical Efficiency"=1)
static_house_filtered$in.misc_well_pump <- as.numeric(in_misc_well_pump_mapping[static_house_filtered$in.misc_well_pump])

# Ordinal coding for in.natural_ventilation
in_natural_ventilation_mapping <- c("Cooling Season, 7 days/wk"=1)
static_house_filtered$in.natural_ventilation <- as.numeric(in_natural_ventilation_mapping[static_house_filtered$in.natural_ventilation])

# Ordinal coding for in.occupants
in_occupants_mapping <- c("3"=3, "1"=1, "2"=2, "4"=4, "5"=5, "8"=8, "6"=6, "7"=7, "10+"=10, "9"=9)
static_house_filtered$in.occupants <- as.numeric(in_occupants_mapping[static_house_filtered$in.occupants])

# Ordinal coding for in.orientation
in_orientation_mapping <- c("North"=1, "West"=2, "South"=3, "Northeast"=4, "Northwest"=5, "Southeast"=6, "East"=7, "Southwest"=8)
static_house_filtered$in.orientation <- as.numeric(in_orientation_mapping[static_house_filtered$in.orientation])

# Ordinal coding for in.plug_load_diversity
in_plug_load_diversity_mapping <- c("100%"=1, "50%"=0, "200%"=2)
static_house_filtered$in.plug_load_diversity <- as.numeric(in_plug_load_diversity_mapping[static_house_filtered$in.plug_load_diversity])

# Ordinal coding for in.refrigerator
in_refrigerator_mapping <- c("EF 6.7, 100% Usage"=1, "EF 17.6, 100% Usage"=2, "EF 19.9, 100% Usage"=3, "EF 10.5, 100% Usage"=4, "EF 15.9, 100% Usage"=5, "EF 10.2, 100% Usage"=6, "None"=0)
static_house_filtered$in.refrigerator <- as.numeric(in_refrigerator_mapping[static_house_filtered$in.refrigerator])

# Ordinal coding for in.roof_material
in_roof_material_mapping <- c("Composition Shingles"=1, "Metal, Dark"=2, "Tile, Concrete"=3, "Wood Shingles"=4, "Tile, Clay or Ceramic"=5, "Slate"=6, "Asphalt Shingles, Medium"=7)
static_house_filtered$in.roof_material <- as.numeric(in_roof_material_mapping[static_house_filtered$in.roof_material])

# Ordinal coding for in.tenure
in_tenure_mapping <- c("Renter"=1, "Owner"=2)
static_house_filtered$in.tenure <- as.numeric(in_tenure_mapping[static_house_filtered$in.tenure])

# Ordinal coding for in.usage_level
in_usage_level_mapping <- c("Medium"=2, "Low"=1, "High"=3)
static_house_filtered$in.usage_level <- as.numeric(in_usage_level_mapping[static_house_filtered$in.usage_level])

# Ordinal coding for in.vacancy_status
in_vacancy_status_mapping <- c("Occupied"=1, "Vacant"=2)
static_house_filtered$in.vacancy_status <- as.numeric(in_vacancy_status_mapping[static_house_filtered$in.vacancy_status])

# Ordinal coding for in.vintage
in_vintage_mapping <- c("1950s"=1, "2000s"=2, "<1940"=3, "1980s"=4, "1990s"=5, "1970s"=6, "1960s"=7, "2010s"=8, "1940s"=9)
static_house_filtered$in.vintage <- as.numeric(in_vintage_mapping[static_house_filtered$in.vintage])

# Ordinal coding for in.vintage_acs
in_vintage_acs_mapping <- c("1940-59"=1, "2000-09"=2, "<1940"=3, "1980-99"=4, "1960-79"=5, "2010s"=6)
static_house_filtered$in.vintage_acs <- as.numeric(in_vintage_acs_mapping[static_house_filtered$in.vintage_acs])

# Ordinal coding for in.water_heater_efficiency
in_water_heater_efficiency_mapping <- c("Natural Gas Standard"=1, "Electric Standard"=2, "Natural Gas Premium"=3, "Propane Tankless"=4, "Propane Standard"=5, "Electric Premium"=6, "Other Fuel"=7, "Propane Premium"=8, "Electric Tankless"=9, "Electric Heat Pump, 80 gal"=10, "Natural Gas Tankless"=11, "Fuel Oil Standard"=12)
static_house_filtered$in.water_heater_efficiency <- as.numeric(in_water_heater_efficiency_mapping[static_house_filtered$in.water_heater_efficiency])

# Ordinal coding for in.water_heater_fuel
in_water_heater_fuel_mapping <- c("Natural Gas"=1, "Electricity"=2, "Propane"=3, "Other Fuel"=4, "Fuel Oil"=5)
static_house_filtered$in.water_heater_fuel <- as.numeric(in_water_heater_fuel_mapping[static_house_filtered$in.water_heater_fuel])

# Ordinal coding for in.weather_file_city
in_weather_file_city_mapping <- c("Rock Hill York Co"=1, "Oconee Co Rgnl"=2, "Columbia Metro"=3, "Columbia Owens Apt"=4, "Greenville Greenvil"=5, "Charleston Muni"=6, "Myrtle Beach Civ"=7, "Anderson Rgnl"=8, "Florence Rgnl"=9, "Orangeburg Muni"=10, "Beaufort Mcas"=11, "Shaw Afb Sumter"=12, "Greenwood Co"=13, "Augusta Bush Field"=14, "Monroe Airport"=15, "Rutherfordton"=16, "Maxton"=17, "Daniel Field"=18)
static_house_filtered$in.weather_file_city <- as.numeric(in_weather_file_city_mapping[static_house_filtered$in.weather_file_city])

# Ordinal coding for in.weather_file_latitude
static_house_filtered$in.weather_file_latitude <- as.numeric(static_house_filtered$in.weather_file_latitude)

# Ordinal coding for in.weather_file_longitude
static_house_filtered$in.weather_file_longitude <- as.numeric(static_house_filtered$in.weather_file_longitude)

# Ordinal coding for in.window_areas
in_window_areas_mapping <- c("F12 B12 L12 R12"=1, "F18 B18 L18 R18"=2, "F9 B9 L9 R9"=3, "F15 B15 L15 R15"=4, "F30 B30 L30 R30"=5, "F6 B6 L6 R6"=6)
static_house_filtered$in.window_areas <- as.numeric(in_window_areas_mapping[static_house_filtered$in.window_areas])

# Ordinal coding for in.windows
in_windows_mapping <- c("Double, Low-E, Non-metal, Air, M-Gain"=1, "Single, Clear, Non-metal"=2, "Double, Clear, Metal, Air"=3, "Single, Clear, Non-metal, Exterior Clear Storm"=4, "Double, Clear, Non-metal, Air"=5, "Single, Clear, Metal"=6, "Double, Clear, Metal, Air, Exterior Clear Storm"=7, "Double, Clear, Non-metal, Air, Exterior Clear Storm"=8, "Triple, Low-E, Non-metal, Air, L-Gain"=9, "Single, Clear, Metal, Exterior Clear Storm"=10)
static_house_filtered$in.windows <- as.numeric(in_windows_mapping[static_house_filtered$in.windows])



# Ordinal coding for upgrade.hvac_cooling_efficiency
upgrade_hvac_cooling_efficiency_mapping <- c("Heat Pump"=1)
static_house_filtered$upgrade.hvac_cooling_efficiency <- as.numeric(upgrade_hvac_cooling_efficiency_mapping[static_house_filtered$upgrade.hvac_cooling_efficiency])




# Convert to character if necessary
static_house_filtered$in.occupants <- as.character(static_house_filtered$in.occupants)

# Ordinal coding for in.occupants
in_occupants_mapping <- c("3"=1, "1"=2, "2"=3, "4"=4, "5"=5, "8"=6, "6"=7, "7"=8, "10+"=9, "9"=10)
static_house_filtered$in.occupants <- as.numeric(in_occupants_mapping[static_house_filtered$in.occupants])




# Ordinal coding for upgrade.clothes_dryer
upgrade_clothes_dryer_mapping <- c("Electric, Premium, Heat Pump, Ventless, 100% Usage"=1, "Electric, Premium, Heat Pump, Ventless, 80% Usage"=2, "Electric, Premium, Heat Pump, Ventless, 120% Usage"=3 )
static_house_filtered$upgrade.clothes_dryer <- as.numeric(upgrade_clothes_dryer_mapping[static_house_filtered$upgrade.clothes_dryer])

# Ordinal coding for upgrade.insulation_ceiling
upgrade_insulation_ceiling_mapping <- c("R-49"=1)
static_house_filtered$upgrade.insulation_ceiling <- as.numeric(upgrade_insulation_ceiling_mapping[static_house_filtered$upgrade.insulation_ceiling])

# Ordinal coding for upgrade.hvac_heating_type
upgrade_hvac_heating_type_mapping <- c("Ducted Heat Pump"=1)
static_house_filtered$upgrade.hvac_heating_type <- as.numeric(upgrade_hvac_heating_type_mapping[static_house_filtered$upgrade.hvac_heating_type])

# Ordinal coding for upgrade.insulation_wall
upgrade_insulation_wall_mapping <- c("Wood Stud, R-13"=1)
static_house_filtered$upgrade.insulation_wall <- as.numeric(upgrade_insulation_wall_mapping[static_house_filtered$upgrade.insulation_wall])

# Ordinal coding for upgrade.insulation_foundation_wall
upgrade_insulation_foundation_wall_mapping <- c("Wall R-10, Interior"=2)
static_house_filtered$upgrade.insulation_foundation_wall <- as.numeric(upgrade_insulation_foundation_wall_mapping[static_house_filtered$upgrade.insulation_foundation_wall])

# Ordinal coding for upgrade.hvac_heating_efficiency
upgrade_hvac_heating_efficiency_mapping <- c("MSHP, SEER 24, 13 HSPF"=1, "MSHP, SEER 29.3, 14 HSPF, Max Load"=2)
static_house_filtered$upgrade.hvac_heating_efficiency <- as.numeric(upgrade_hvac_heating_efficiency_mapping[static_house_filtered$upgrade.hvac_heating_efficiency])

# Ordinal coding for upgrade.cooking_range
upgrade_cooking_range_mapping_2 <- c("Electric, Induction, 100% Usage"=1, "Electric, Induction, 80% Usage"=2, "Electric, Induction, 120% Usage"=3)
static_house_filtered$upgrade.cooking_range <- as.numeric(upgrade_cooking_range_mapping_2[static_house_filtered$upgrade.cooking_range])



# Ordinal coding for in.orientation
in_orientation_mapping <- c("North"=1, "West"=2, "South"=3, "Northeast"=4, "Northwest"=5, "Southeast"=6, "East"=7, "Southwest"=8)
static_house_filtered$in.orientation <- as.numeric(in_orientation_mapping[static_house_filtered$in.orientation])




# Ordinal coding for in.tenure
in_tenure_mapping <- c("Renter"=1, "Owner"=2)
static_house_filtered$in.tenure <- as.numeric(in_tenure_mapping[static_house_filtered$in.tenure])

# Ordinal coding for in.usage_level
in_usage_level_mapping <- c("Medium"=1, "Low"=2, "High"=3)
static_house_filtered$in.usage_level <- as.numeric(in_usage_level_mapping[static_house_filtered$in.usage_level])

# Ordinal coding for in.vacancy_status
in_vacancy_status_mapping <- c("Occupied"=1, "Vacant"=2)
static_house_filtered$in.vacancy_status <- as.numeric(in_vacancy_status_mapping[static_house_filtered$in.vacancy_status])

# Ordinal coding for in.vintage
in_vintage_mapping <- c("1950s"=1, "2000s"=2, "<1940"=3, "1980s"=4, "1990s"=5, "1970s"=6, "1960s"=7, "2010s"=8, "1940s"=9)
static_house_filtered$in.vintage <- as.numeric(in_vintage_mapping[static_house_filtered$in.vintage])

# Ordinal coding for in.vintage_acs
in_vintage_acs_mapping <- c("1940-59"=1, "2000-09"=2, "<1940"=3, "1980-99"=4, "1960-79"=5, "2010s"=6)
static_house_filtered$in.vintage_acs <- as.numeric(in_vintage_acs_mapping[static_house_filtered$in.vintage_acs])

# Ordinal coding for in.water_heater_efficiency
in_water_heater_efficiency_mapping <- c("Natural Gas Standard"=1, "Electric Standard"=2, "Natural Gas Premium"=3, "Propane Tankless"=4, "Propane Standard"=5, "Electric Premium"=6, "Other Fuel"=7, "Propane Premium"=8, "Electric Tankless"=9, "Electric Heat Pump, 80 gal"=10, "Natural Gas Tankless"=11, "Fuel Oil Standard"=12)
static_house_filtered$in.water_heater_efficiency <- as.numeric(in_water_heater_efficiency_mapping[static_house_filtered$in.water_heater_efficiency])

# Ordinal coding for in.water_heater_fuel
in_water_heater_fuel_mapping <- c("Natural Gas"=1, "Electricity"=2, "Propane"=3, "Other Fuel"=4, "Fuel Oil"=5)
static_house_filtered$in.water_heater_fuel <- as.numeric(in_water_heater_fuel_mapping[static_house_filtered$in.water_heater_fuel])

# Ordinal coding for in.weather_file_city
in_weather_file_city_mapping <- c("Rock Hill York Co"=1, "Oconee Co Rgnl"=2, "Columbia Metro"=3, "Columbia Owens Apt"=4, "Greenville Greenvil"=5, "Charleston Muni"=6, "Myrtle Beach Civ"=7, "Anderson Rgnl"=8, "Florence Rgnl"=9, "Orangeburg Muni"=10, "Beaufort Mcas"=11, "Shaw Afb Sumter"=12, "Greenwood Co"=13, "Augusta Bush Field"=14, "Monroe Airport"=15, "Rutherfordton"=16, "Maxton"=17, "Daniel Field"=18)
static_house_filtered$in.weather_file_city <- as.numeric(in_weather_file_city_mapping[static_house_filtered$in.weather_file_city])

# Ordinal coding for in.weather_file_latitude
static_house_filtered$in.weather_file_latitude <- as.numeric(static_house_filtered$in.weather_file_latitude)

# Ordinal coding for in.weather_file_longitude
static_house_filtered$in.weather_file_longitude <- as.numeric(static_house_filtered$in.weather_file_longitude)

# Ordinal coding for in.window_areas
in_window_areas_mapping <- c("F12 B12 L12 R12"=1, "F18 B18 L18 R18"=2, "F9 B9 L9 R9"=3, "F15 B15 L15 R15"=4, "F30 B30 L30 R30"=5, "F6 B6 L6 R6"=6)
static_house_filtered$in.window_areas <- as.numeric(in_window_areas_mapping[static_house_filtered$in.window_areas])


# Ordinal coding for upgrade.insulation_roof
upgrade_insulation_roof_mapping <- c("Finished, R-30"=1)
static_house_filtered$upgrade.insulation_roof <- as.numeric(upgrade_insulation_roof_mapping[static_house_filtered$upgrade.insulation_roof])

# Ordinal coding for upgrade.water_heater_efficiency
upgrade_water_heater_efficiency_mapping <- c("Electric Heat Pump, 50 gal, 3.45 UEF"=1, "Electric Heat Pump, 66 gal, 3.35 UEF"=2, "Electric Heat Pump, 80 gal, 3.45 UEF"=3)
static_house_filtered$upgrade.water_heater_efficiency <- as.numeric(upgrade_water_heater_efficiency_mapping[static_house_filtered$upgrade.water_heater_efficiency])

# Ordinal coding for upgrade.hvac_cooling_efficiency
upgrade_hvac_cooling_efficiency_mapping <- c("Heat Pump"=1)
static_house_filtered$upgrade.hvac_cooling_efficiency <- as.numeric(upgrade_hvac_cooling_efficiency_mapping[static_house_filtered$upgrade.hvac_cooling_efficiency])

# Ordinal coding for upgrade.infiltration_reduction
upgrade_infiltration_reduction_mapping <- c("30%"=1)
static_house_filtered$upgrade.infiltration_reduction <- as.numeric(upgrade_infiltration_reduction_mapping[static_house_filtered$upgrade.infiltration_reduction])

# Ordinal coding for upgrade.geometry_foundation_type
upgrade_geometry_foundation_type_mapping <- c("Unvented Crawlspace"=1)
static_house_filtered$upgrade.geometry_foundation_type <- as.numeric(upgrade_geometry_foundation_type_mapping[static_house_filtered$upgrade.geometry_foundation_type])


```

```{r}
static_house_ordinal <- static_house_filtered
static_house_ordinal_copy <- static_house_ordinal
static_house_ordinal_copy_2 <- static_house_ordinal
```


```{r}
setwd("C:/Users/Soundarya Ravi/Desktop/Shiny/")

write.csv(static_house_ordinal, file ="raw_uncleaned_static_ordinal",row.names=FALSE)

```
```{r}
#Remove NA Rows or Replace NA rows
handle_missing_values <- function(df) {
  for (col in names(df)) {
    if (any(is.na(df[[col]]))) {
      # Check if column has missing values
      if (is.numeric(df[[col]])) {
        # For numeric columns, replace missing values with mean
        df[[col]][is.na(df[[col]])] <- mean(df[[col]], na.rm = TRUE)
      } else {
        # For non-numeric columns, replace missing values with mode
        mode_val <- as.character(which.max(table(df[[col]])))
        df[[col]][is.na(df[[col]])] <- mode_val
      }
    }
  }
  return(df)
}

# Applying the function to your dataframe
static_house_ordinal_copy <- handle_missing_values(static_house_ordinal_copy)

```

```{r}
unique_values <- sapply(static_house_ordinal_copy, unique)
print(unique_values)
```
```{r}
fill_mode_non_numeric <- function(x) {
  if (is.character(x) || is.factor(x)) {
    mode_val <- as.character(which.max(table(x)))
    x[is.na(x)] <- mode_val
  }
  return(x)
}

# Applying the function to your dataframe
static_house_ordinal_copy <- lapply(static_house_ordinal_copy, fill_mode_non_numeric)

```

```{r}
static_house_ordinal_copy <- static_house_ordinal_copy_2
```



```{r}
str(static_house_ordinal_copy)




```
```{r}
selected_columns <- static_house_ordinal_copy[, !(names(static_house_ordinal_copy) %in% c(
  "upgrade.insulation_wall",
  "upgrade.insulation_foundation_wall",
  "upgrade.hvac_heating_type",
  "upgrade.insulation_ceiling",
  "upgrade.hvac_cooling_efficiency",
  "upgrade.infiltration_reduction",
  "upgrade.geometry_foundation_type",
  "upgrade.insulation_roof"
))]


```


```{r}
new_dataframe <- data.frame(selected_columns)
static_house_ordinal_clear <- new_dataframe

```

```{r}
static_house_ordinal_clear$upgrade.cooking_range <- ifelse(static_house_ordinal_clear$upgrade.cooking_range == "", 0, static_house_ordinal_clear$upgrade.cooking_range)
static_house_ordinal_clear$upgrade.clothes_dryer <- ifelse(static_house_ordinal_clear$upgrade.clothes_dryer == "", 0, static_house_ordinal_clear$upgrade.clothes_dryer)
static_house_ordinal_clear$upgrade.water_heater_efficiency <- ifelse(static_house_ordinal_clear$upgrade.water_heater_efficiency == "", 0, static_house_ordinal_clear$upgrade.water_heater_efficiency)



```



```{r}

unique_values <- sapply(static_house_ordinal_clear, unique)
print(unique_values)
```

```{r}
setwd("C:/Users/Soundarya Ravi/Desktop/Shiny/")

write.csv(static_house_ordinal_clear, file ="SHOrdinalFinalModelFIle.csv",row.names=FALSE)
```

```{r}
#Model_Merge_SH <- static_house_ordinal_clear
# Assuming Model_Merge_SH and energy_result_df are your data frames
# and both have a column named 'bldg_id'

# Merge the data frames on the 'bldg_id' column
SH_Energy_Model_Ordinal <- merge(Model_Merge_SH, energy_result_df, by='bldg_id')

# Print or view the merged data frame
print(SH_Energy_Model_Ordinal)


```


```{r}
# Assuming SH_Energy_Model_Ordinal and weather_combined are your data frames
# and they have columns 'in.county' and 'county_id' respectively

# Merge the data frames on the specified columns
Final_Merged_Ordinal_Model<-  merge(SH_Energy_Model_Ordinal, weather_combined, by.x=c('in.county', 'time_split'), by.y=c('county_id', 'time_split'))


# Print or view the merged data frame
print(Final_Merged_Ordinal_Model)



```


```{r}
# Assuming Final_Merged_Ordinal_Model is your merged data frame
# Sort the data frame based on 'bldg_id' and 'time_range.x'
Final_team2_Modelling_SEW<- Final_Merged_Ordinal_Model[order(Final_Merged_Ordinal_Model$bldg_id, Final_Merged_Ordinal_Model$time_range.x), ]

# Print or view the sorted data frame
print(Final_team2_Modelling_SEW)


```



```{r}
setwd("C:/Users/Soundarya Ravi/Desktop/Shiny/")

write.csv(Final_team2_Modelling_SEW, file ="Team2_Final_SEW_Ordinal_Modelling1.csv",row.names=FALSE)

```

```{r}
# Assuming your dataframe is named Final_team2_Modelling_SEW

# Select numeric columns only
numeric_columns <- Final_team2_Modelling_SEW[sapply(Final_team2_Modelling_SEW, is.numeric)]

# Calculate correlation matrix
correlation_matrix <- cor(numeric_columns)

# Print the correlation matrix
print(correlation_matrix)

```



```{r}
# Install corrplot package if not installed
# install.packages("corrplot")

# Load the corrplot package
library(corrplot)

# Assuming your dataframe is named Final_team2_Modelling_SEW

# Select numeric columns only
numeric_columns <- Final_team2_Modelling_SEW[sapply(Final_team2_Modelling_SEW, is.numeric)]

# Remove rows with missing values
numeric_columns <- na.omit(numeric_columns)

# Calculate correlation matrix
correlation_matrix <- cor(numeric_columns)
# Set a threshold for correlation values
threshold <- 0.4

# Filter correlation matrix for values above the threshold
filtered_correlation_matrix <- correlation_matrix * (abs(correlation_matrix) > threshold)


# Plot the correlation matrix using corrplot without hierarchical clustering
corrplot(
  filtered_correlation_matrix,
  method = "color",            # Color-coded plot
  type = "upper",              # Show only upper triangle to avoid redundancy
  tl.cex = 0.7,                 # Text label size
  tl.col = "black",             # Text label color
  col = colorRampPalette(c("#FFFFFF", "#009688", "#004D40"))(100),  # Green color palette
  addCoef.col = "black",        # Coefficient color
  number.cex = 0.6             # Correlation coefficient text size
)



```
```{r}
# Visualize a subset of the correlation matrix
sub_cor_matrix <- correlation_matrix[1:10, 1:10]  # Adjust the range as needed

# Plot the subset
corrplot(sub_cor_matrix, method = "color")

```

```{r}
# Save correlation matrix to a CSV file
setwd("C:/Users/Soundarya Ravi/Desktop/Shiny")
write.csv(correlation_matrix, file = "correlation_matrix1.csv", row.names=FALSE)

```

```{r}

# Assuming your dataframe is named Final_team2_Modelling_SEW

# Select specific columns for correlation
selected_columns <- Final_team2_Modelling_SEW[, c(
  "time_split_numeric",
  "in.sqft",
  "in.bedrooms",
  "in.clothes_dryer",
  "in.clothes_washer",
  "in.cooling_setpoint",
  "in.federal_poverty_level",
  "in.geometry_floor_area",
  "in.geometry_floor_area_bin",
  "in.geometry_garage",
  "in.heating_setpoint",
  "in.hot_water_fixtures",
  "in.income",
  "in.misc_hot_tub_spa",
  "in.misc_pool",
  "in.misc_hot_tub_spa",
  "in.misc_pool",
  "in.misc_pool_heater",
  "in.misc_pool_pump",
  "in.occupants",
  "in.plug_load_diversity",
  "in.usage_level",
  "upgrade.water_heater_efficiency",
  "upgrade.clothes_dryer",
  "upgrade.cooking_range",
  "out.kitchen_energy_consumption",
  "out.laundry_energy_consumption",
  "out.heating_cooling_energy_consumption",
  "out.water_heating_energy_consumption",
  "out.electrical_appliances_energy_consumption",
  "out.outdoor_appliances_energy_consumption",
  "Dry_Bulb_Temperature_C",
  "Wind_Speed_m_s",
  "Wind_Direction_Deg",
  "Diffuse_Horizontal_Radiation_W_m2"
)]

# Impute missing values with the mean of each column
selected_columns <- apply(selected_columns, 2, function(x) ifelse(is.na(x), mean(x, na.rm = TRUE), x))

# Calculate correlation matrix for the selected columns
correlation_matrix <- cor(selected_columns)

# Create heatmap
heatmap(correlation_matrix)


```
```{r}
# Assuming your dataframe is named Final_team2_Modelling_SEW

# Create a numeric mapping for time_split
time_split_mapping <- c(
  "Late Night" = 1,
  "Early Morning" = 2,
  "Morning" = 3,
  "Noon" = 4,
  "Evening" = 5,
  "Night" = 6
)

# Convert time_split to numeric using the mapping
Final_team2_Modelling_SEW$time_split_numeric <- as.numeric(factor(Final_team2_Modelling_SEW$time_split, levels = names(time_split_mapping), labels = time_split_mapping))

# Display the updated dataframe
head(Final_team2_Modelling_SEW)

```
```{r}
threshold <- 0.5

# Filter correlation matrix for values above the threshold
filtered_correlation_matrix <- correlation_matrix * (abs(correlation_matrix) > threshold)


# Plot the correlation matrix using corrplot without hierarchical clustering
corrplot(
  filtered_correlation_matrix,
  method = "color",            # Color-coded plot
  type = "upper",              # Show only upper triangle to avoid redundancy
  tl.cex = 0.7,                 # Text label size
  tl.col = "black",             # Text label color
  col = colorRampPalette(c("#FFFFFF", "#009688", "#004D40"))(100),  # Green color palette
  addCoef.col = "black",        # Coefficient color
  number.cex = 0.6             # Correlation coefficient text size
)
```

```{r}
# Install network package if not installed
# install.packages("network")

# Load the network package
library(network)

# Create a network object
net <- as.network(filtered_correlation_matrix)

# Plot the network
plot(net, displaylabels = TRUE, boxed.labels = TRUE, label.cex = 0.7)



```

